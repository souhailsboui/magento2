<?xml version="1.0"?>
<schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd">
    <table name="meetanshi_ship_rules" resource="default" engine="innodb" comment="Meetanshi Ship Rules">
        <column xsi:type="int" name="rule_id" padding="10" unsigned="true" nullable="false" identity="true" comment="Id"/>
        <column xsi:type="boolean" name="is_active" nullable="false" default="0" comment="Is Active"/>
        <column xsi:type="boolean" name="calculation" nullable="false" default="0" comment="Calculation"/>
        <column xsi:type="int" name="position" unsigned="true"  nullable="false" comment="Position"/>
        <column xsi:type="decimal" name="rate_base" nullable="false" scale="2" precision="10" comment="Rate Base"/>
        <column xsi:type="decimal" name="rate_fixed" nullable="false" scale="2" precision="10" comment="Rate Fixed"/>
        <column xsi:type="decimal" name="weight_fixed" nullable="false" scale="2" precision="10" comment="Weight Fixed"/>
        <column xsi:type="decimal" name="rate_percent" nullable="false" scale="2" precision="10" comment="Rate Percent"/>
        <column xsi:type="decimal" name="handling_fee" nullable="false" scale="2" precision="10"  comment="Handling fee"/>
        <column xsi:type="varchar" name="name" nullable="false" length="255"  comment="Name"/>
        <column xsi:type="varchar" name="days" nullable="false" length="255"  comment="Days"/>
        <column xsi:type="varchar" name="stores" nullable="false" length="255"  comment="Stores"/>
        <column xsi:type="varchar" name="customer_groups" nullable="false" length="255"  comment="Customer Groups"/>
        <column xsi:type="text" name="shipping_carriers" nullable="true" comment="Shipping Carriers"/>
        <column xsi:type="text" name="shipping_methods" nullable="true" comment="Shipping Methods"/>
        <column xsi:type="text" name="conditions_serialized" nullable="true" comment="Conditions Serialized"/>
        <column xsi:type="text" name="actions_serialized" nullable="true" comment="Actions Serialized"/>
        <column xsi:type="int" name="from_time" nullable="true" comment="From Time"/>
        <column xsi:type="int" name="to_time" nullable="true" comment="To Time"/>
        <column xsi:type="int" name="is_admin" nullable="true" comment="Is Admin"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="rule_id"/>
        </constraint>
    </table>

    <table name="meetanshi_ship_attributes" resource="default" engine="innodb" comment="Meetanshi Ship Attributes">
        <column xsi:type="int" name="attr_id" padding="10" unsigned="true" nullable="false" identity="true" comment="Id"/>
        <column xsi:type="int" name="rule_id" unsigned="true" padding="10"  nullable="false" comment="Rule Id"/>
        <column xsi:type="varchar" name="code" nullable="false" length="255"  comment="Code"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="attr_id"/>
        </constraint>
        <index referenceId="meetanshi_ship_rule_index" indexType="btree">
            <column name="rule_id"/>
        </index>
        <constraint xsi:type="foreign" referenceId="meetanshi_ship_rule_foreign" table="meetanshi_ship_attributes" column="rule_id" referenceTable="meetanshi_ship_rules" referenceColumn="rule_id" onDelete="CASCADE"/>
    </table>
</schema>